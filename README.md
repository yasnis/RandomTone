# RandomTone

楽器（主にギターやベースなどの弦楽器）練習用のWeb音名学習アプリケーションです。指板上の音名を覚えるためにランダムに音名を提示し、メトロノームのガイド音と共に練習できます。

## 概要

RandomToneは弦楽器奏者が指板上の音名を素早く認識できるようになるためのトレーニングツールです。一定のテンポで次々と変化する音名に合わせて練習することで、瞬時に音名を認識する能力を向上させます。

## 主な機能

### 音名表示
- **現在の音名**: 画面中央に大きく表示され、現在演奏すべき音名を示します
- **次の音名**: 画面の右下に小さめに表示され、次に演奏する音名を予告します
- **音名の種類**: C、C#/Db、D、D#/Eb、E、F、F#/Gb、G、G#/Ab、A、A#/Bb、B

### 再生コントロール
- **再生/停止ボタン**: メトロノームと音名表示の開始/停止
- **BPMスライダー**: テンポの調整（20〜240 BPM）
- **拍子選択**: 2/4、3/4、4/4、5/4、6/8、7/8から選択可能
- **音色選択**: 
  - Synth（通常のシンセサイザー）
  - AM Synth（AM変調シンセサイザー）
  - FM Synth（FM変調シンセサイザー）
  - Membrane（膜鳴楽器風シンセサイザー）
- **切り替え小節数**: 音名を切り替える頻度を1～8小節から選択可能

### 操作性
- **キーボードショートカット**:
  - スペースキー: 再生/停止の切り替え
  - 上矢印キー: テンポを+5 BPM上げる
  - 下矢印キー: テンポを-5 BPM下げる
  - 左矢印キー: 切り替え小節数を減らす
  - 右矢印キー: 切り替え小節数を増やす
- **長時間練習サポート**: 5分間の連続練習後に継続確認ダイアログを表示

## 技術的な特徴

- **Web対応**: ブラウザ上で動作するため、インストール不要で利用可能
- **レスポンシブデザイン**: 様々な画面サイズに対応
- **Tone.js音響エンジン**: 高品質なメトロノーム音を生成
- **React**: モダンなUIと状態管理
- **オフライン対応**: インターネット接続がなくても利用可能

## 使い方

1. アプリを開くと、初期設定（BPM=60、拍子=4/4）の状態で表示されます
2. 必要に応じてBPM、拍子、音色を調整します
3. 再生ボタンまたはスペースキーを押してトレーニングを開始します
4. 表示された音名に対応する音を指板上で見つけます
5. メトロノームの拍に合わせて一定間隔で音名が自動的に切り替わります
6. トレーニングを終えるには停止ボタンまたはスペースキーを押します

## 推奨環境

- 最新のChrome、Firefox、Safari、Edgeブラウザ
- JavaScript有効
- オーディオ出力設定が有効なデバイス

## 開発環境

- React 19.1.0
- TypeScript 5.8.3
- Tone.js 15.1.22
- Vite 6.3.5

## 開発者向けガイド

### システム要件

- Node.js 18.0.0 以上
- npm 9.0.0 以上または yarn 3.0.0 以上

### プロジェクトのセットアップ

リポジトリをクローンした後、依存パッケージをインストールします：

```bash
# npmを使用する場合
npm install

# yarnを使用する場合
yarn
```

### 開発サーバーの起動

ローカルでの開発には、Viteの開発サーバーを使用します：

```bash
# npmを使用する場合
npm run dev

# yarnを使用する場合
yarn dev
```

開発サーバーは、デフォルトでは `http://localhost:5173` でアクセスできます。

### ビルド方法

本番環境用のビルドを作成するには：

```bash
# npmを使用する場合
npm run build

# yarnを使用する場合
yarn build
```

ビルドされたファイルは `dist` ディレクトリに出力されます。

### ビルド結果のプレビュー

ビルドされたアプリケーションをローカルでプレビューするには：

```bash
# npmを使用する場合
npm run preview

# yarnを使用する場合
yarn preview
```

### デプロイ方法

ビルドされたファイルは静的コンテンツなので、任意のWebサーバーやホスティングサービス（GitHub Pages、Netlify、Vercel、Firebase Hostingなど）にデプロイできます。

例：Netlifyへのデプロイ方法
1. Netlifyアカウントを作成
2. 新しいサイトを「Gitからインポート」で作成
3. リポジトリを連携し、ビルドコマンドを `npm run build` に設定
4. 公開ディレクトリを `dist` に設定

### コードの構成

- `src/App.tsx` - メインのアプリケーションコンポーネント
- `src/main.tsx` - エントリーポイント
- `src/style.css` - グローバルスタイル定義
- `public/` - 静的アセット

### 技術的実装の詳細

#### 音声システム
RandomToneはWebブラウザのWeb Audio APIを使用しています。具体的にはTone.jsライブラリを通じてアクセスします。初回再生時にはユーザーインタラクションが必要で、AudioContextが初期化されます。

#### メトロノームの実装
一定間隔でのメトロノーム音の生成には、Tone.jsのTransportシステムを使用しています。これにより時間的に正確な再生が可能になっています。

#### 状態管理
React Hooksを使用してアプリケーションの状態を管理しています。useStateで基本的な状態を、useCallbackで関数のメモ化を、useEffectで副作用の管理を行っています。

#### パフォーマンス最適化
メトロノームの実装では、イベントのスケジューリングに最適化された手法を使用し、リアルタイム処理によるジッターを最小限に抑えています。

## ライセンス

このプロジェクトはMIT Licenseの下で公開されています。詳しくは[LICENSE](LICENSE)ファイルをご覧ください。

## 貢献について

プルリクエストは歓迎します。大きな変更を行う場合は、まずissueを作成して変更内容について議論してください。

---

© 2025 RandomTone